<a href="#" class="btn btn-xs btn-primary space hotter" id="hotter">Look by Hotest</a>
<a href="#" class="btn btn-xs btn-primary space newer" id="newer">Look by Newest</a>

<% if @parent.nil? %>
<h1 class="h3 text-center"><b><%=@category.title %></b><br><p class="h6">Best Products</p></h1>
<% else %>
<h1 class="h3 text-center"><b><%=@category.title %></b><br><p class="h6">Best Products related to <%=@category.title %></p></h1>
<% end %>

 <div class="row">

  <% if @category.title == "Fashion" %>

    <div class="btn-group btn-group-justified size gender">
      <a href= "#" class="btn btn-default size male"> Male </a>
      <a href= "#" class="btn btn-default size female"> Female </a>
    </div>

    <% elsif @category.title == "Lingerie" %>

      <div class="btn-group btn-group-justified size gender">
      <a href= "#" class="btn btn-default size"> Female </a>
     </div>

     <% else @parent %> 

        <% if @parent != nil && @subcatparent.title == "Fashion" %>

        <div class="btn-group btn-group-justified size gender">
        <a href= "#" class="btn btn-default size male"> Male </a>
        <a href= "#" class="btn btn-default size female"> Female </a>
      </div>

      <%end %>

    <%end %>
    
    <% if @category.title == "Fashion" %>
    <div class="btn-group btn-group-justified size females">
       <% @subcategories.each do |sub| %>
          <%= link_to "#{sub.title}", category_path(sub), class: 'btn btn-default size' %>
       <% end %>
    </div>
    <div class="btn-group btn-group-justified size males">
       <% @subcategories.where(:gender => nil).each do |sub| %>
          <%= link_to "#{sub.title}", category_path(sub), class: 'btn btn-default size' %>
       <% end %>
    </div>
  <% elsif @parent.nil? %>
  <div class="btn-group btn-group-justified size">
    <% @subcategories.each do |sub| %>
          <%= link_to "#{sub.title}", category_path(sub), class: 'btn btn-default size' %>
       <% end %>
    </div>
  <% else %>
     <% if @parent != nil && @subcatparent.title == "Fashion"  %>
   <div class="btn-group btn-group-justified size females">
    <% @parentsubcats.each do |sub| %>
            <%= link_to "#{sub.title}", category_path(sub), class: 'btn btn-default size' %>
      <% end %>
      </div>
      <div class="btn-group btn-group-justified size males">
    <% @parentsubcats.where(:gender => nil).each do |sub| %>
            <%= link_to "#{sub.title}", category_path(sub), class: 'btn btn-default size' %>
      <% end %>
    </div>
    <% else %>
    <div class="btn-group btn-group-justified size">
    <% @parentsubcats.each do |sub| %>
            <%= link_to "#{sub.title}", category_path(sub), class: 'btn btn-default size' %>
      <% end %>
     </div>
    <% end %>
  <% end %>
 </div>
    <%= link_to "New Product", new_product_path(@product), class: 'btn btn-success btn-xs pull-right to-right' %>

     <div class="leaderboard">
      <% if current_user && Product.first !=nil %>
           <table class="table table-striped table-hover fixer">
              <thead>
                <tr>
                  <th>Top Users</th>
                  <th>Score</th>
                </tr>
              </thead>
              <tbody>
                 <% @leaders.each do |leader| %>
                   <% user = User.find(leader[:member].to_i) %>
                <tr>
                  <td><%= link_to user.name, [user] %></td>
                  <td><%= leader[:score].to_i %></td>
                </tr>
                <% end %>
            </tbody>
          </table> 
      <% end %>
    </div>

 <% if @parent.nil? %>
  <% if @category.title == "Fashion" %>
  <div class="males">
    <div class="show_box newer">
      <div id="page">
      <% @category.products.where(:gender => "Male").each do |product| %>
         <%= render product %>
         <% end %>
      </div>
    </div>
  </div>

  <div class="females">
     <div class="show_box newer">
      <div id="page">
      <% @category.products.where(:gender => "Female").each do |product| %>
       <%= render product %>
       <% end %>
      </div>
    </div>
  </div>

    <% else %>
    <div class="show_box newer">
      <div id="page">
      <% @products.all.each do |product| %>
       <%= render product %>
       <% end %>
      </div>
    </div>
    <% end %>

    <% else %>
   <% if @subcatparent.title == "Fashion"  %>
    <div class="males">
      <div class="show_box newer">
        <div id="page">
      <% @products.where(:gender => "Male").each do |product| %>
         <%= render product %>
         <% end %>
       </div>
      </div>
    </div>

    <div class="females">
      <div class="show_box newer">
        <div id="page">
        <% @products.where(:gender => "Female").each do |product| %>
       <%= render product %>
       <% end %>
        </div>
      </div>   
    </div>

    <% else %>
    <div class="show_box newer">
      <div id="page">
      <% @products.all.each do |product| %>
       <%= render product %>
       <% end %>
      </div>
    </div>
    <% end %>
    <% end %>

 <% if @parent.nil? %>
     <% if @category.title == "Fashion" %>

     <div class="males">
      <div class="show_box hoter">
        <div id="page">
          <%= render :partial => 'products/product', :collection => @products.where(:gender => "Male").unscoped.all.reverse%> 
        </div>
      </div>
    </div>

    <div class="females">
       <div class="show_box hoter">
        <div id="page">
        <%= render :partial => 'products/product', :collection => @products.where(:gender => "Female").unscoped.all.reverse%>
        </div>
      </div>
    </div>

    <% else %>

    <div class="show_box hoter">
        <div id="page">
         <%= render :partial => 'products/product', :collection => @products.unscoped.all.reverse%>
          </div>
      </div>
    <% end %>

    <% else %>
   <% if @subcatparent.title == "Fashion"  %>
    <div class="males">
      <div class="show_box hoter">
        <div id="page">
          <%= render :partial => 'products/product', :collection => @products.where(:gender => "Male").unscoped.all.reverse%> 
        </div>
      </div>
    </div>

    <div class="females">
       <div class="show_box hoter">
        <div id="page">
        <%= render :partial => 'products/product', :collection => @products.where(:gender => "Female").unscoped.all.reverse%>
        </div>
      </div>
    </div>

    <% else %>

    <div class="show_box hoter">
        <div id="page">
         <%= render :partial => 'products/product', :collection => @products.unscoped.all.reverse%>
          </div>
      </div>

    <% end %>
    <% end %>
    <% unless @products.current_page == @products.total_pages %>
    <p id="view-more">
      <%= link_to('View More', url_for(page: @products.current_page + 1)) %>
    </p>
<% end %>

