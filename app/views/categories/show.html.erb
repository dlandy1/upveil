<a href="#" class="btn btn-xs btn-primary space hotter" id="hotter">Look by Hottest</a>
<a href="#" class="btn btn-xs btn-primary space newer" id="newer">Look by Newest</a>

<% if @parent.nil? %>
<h1 class="h3 text-center"><b><%=@category.title %></b><br><p class="h6">Best Products</p></h1>
<% else %>
<h1 class="h3 text-center"><b><%=@category.title %></b><br><p class="h6">Best Products related to <%=@category.title %></p></h1>
<% end %>

 <div class="row">

  <% if @category.title == "Fashion" %>

    <div class="btn-group btn-group-justified size gender">
      <a href= "#" class="btn btn-default size female"><%= fa_icon "female" %>Female </a>
      <a href= "#" class="btn btn-default size male"><%= fa_icon "male" %>Male </a>
    </div>

    <% elsif @category.title == "Lingerie" %>

      <div class="btn-group btn-group-justified size gender">
      <a href= "#" class="btn btn-default size"> Female </a>
     </div>

     <% else @parent %> 

        <% if @parent != nil && @subcatparent.title == "Fashion" %>

      <div class="btn-group btn-group-justified size gender">
        <a href= "#" class="btn btn-default size female"> Female </a>
        <a href= "#" class="btn btn-default size male"> Male </a>
      </div>

      <%end %>

    <%end %>
    
    <% if @category.title == "Fashion" %>
    <div class="btn-group btn-group-justified size females">
       <% @subcategories.each do |sub| %>
          <%= link_to "#{sub.title}", category_path(sub), class: 'btn btn-default size' %>
       <% end %>
    </div>
    <div class="btn-group btn-group-justified size males">
       <% @subcategories.where(:gender => nil).each do |sub| %>
          <%= link_to "#{sub.title}", category_path(sub), class: 'btn btn-default size' %>
       <% end %>
    </div>
  <% elsif @parent.nil? %>
  <div class="btn-group btn-group-justified size">
    <% @subcategories.each do |sub| %>
          <%= link_to "#{sub.title}", category_path(sub), class: 'btn btn-default size' %>
       <% end %>
    </div>
  <% else %>
     <% if @parent != nil && @subcatparent.title == "Fashion"  %>
   <div class="btn-group btn-group-justified size females">
    <% @parentsubcats.each do |sub| %>
            <%= link_to "#{sub.title}", category_path(sub), class: 'btn btn-default size' %>
      <% end %>
      </div>
      <div class="btn-group btn-group-justified size males">
    <% @parentsubcats.where(:gender => nil).each do |sub| %>
            <%= link_to "#{sub.title}", category_path(sub), class: 'btn btn-default size' %>
      <% end %>
    </div>
    <% else %>
    <div class="btn-group btn-group-justified size">
    <% @parentsubcats.each do |sub| %>
            <%= link_to "#{sub.title}", category_path(sub), class: 'btn btn-default size' %>
      <% end %>
     </div>
    <% end %>
  <% end %>
 </div>
    <%= link_to "New Product", new_product_path(@product), class: 'btn btn-primary btn-xs pull-right to-right' %>

     <div class="leaderboard">
      <% if current_user && Product.first !=nil %>
           <table class="table table-striped table-hover fixer">
              <thead>
                <tr>
                  <th></th>
                  <th><%= @category.title %> Leaders</th>
                  <th>Score</th>
                </tr>
              </thead>
              <tbody>
                 <% @leaders.each do |leader| %>
                   <% user = User.friendly.find(leader[:member].to_i) %>
                   <% rank = leader[:rank].to_i %>
                <tr>
                  <td><%= rank %></td>
                  <td>
                    <%= link_to [user] do %>
                      <%= image_tag(user.identity.smallimage)%><p><%= user.name %></p>
                    <% end %>
                  </td>
                  <td><%= leader[:score].to_i %></td>
                </tr>
                <% end %>
            </tbody>
          </table> 
      <% end %>
    </div>

 <% if @parent.nil? %>
  <% if @category.title == "Fashion" %>

    <div class="males">
      <%= render :partial => "male" %>
    </div>

     <div class="females">
      <%= render :partial => "female" %>
    </div>    

    <% else %>
    <div class="show_box newer" id="products">
      <div class="page">
      <% @products.all.each do |product| %>
       <%= render product %>
       <% end %>
      </div>
    </div>
    <% end %>

    <% else %>
   <% if @subcatparent.title == "Fashion"  %>

    <div class="males">
      <%= render :partial => "male" %>
    </div>

     <div class="females">
      <%= render :partial => "female" %>
    </div>    


    <% else %>
    <div class="show_box newer"> 
      <div class="page">
      <% @products.all.each do |product| %>
       <%= render product %>
       <% end %>
      </div>
    </div>
    <% end %>
    <% end %>

 <% if @parent.nil? %>
     <% if @category.title == "Fashion" %>
     <div class="males">
      <div class="show_box hotter">
        <div class="page">
          <%= render :partial => 'products/product', :collection => @maleproducts.unscoped.all.reverse%> 
        </div>
      </div>
    </div>

    <div class="females">
       <div class="show_box hotter">
        <div id="page">
        <%= render :partial => 'products/product', :collection => @femaleproducts.unscoped.all.reverse%>
        </div>
      </div>
    </div>

    <% else %>

    <div class="show_box hotter">
        <div id="page">
          <% @unscope.all.each do |product| %>
           <%= render product %>
          <% end %>
          </div>
      </div>
    <% end %>

    <% else %>
   <% if @subcatparent.title == "Fashion"  %>
    <div class="males">
      <div class="show_box hotter">
        <div id="page">
          <%= render :partial => 'products/product', :collection => @maleproducts.unscoped.all.reverse%> 
        </div>
      </div>
    </div>

    <div class="females">
       <div class="show_box hotter">
        <div id="page">
        <%= render :partial => 'products/product', :collection =>  @femaleunscope%>
        </div>
      </div>
    </div>

    <% else %>

    <div class="show_box hotter">
        <div class="page">
        <% @unscope.all.each do |product| %>
           <%= render product %>
          <% end %>
          </div>
      </div>

    <% end %>
    <% end %>
  <% if @products != nil %>
    <% if @parent %>
       <% if @subcatparent.title == "Fashion" %>
      <% else %>
        <%= paginate @products %>
      <% end %>
    <%else %>
      <% if @category.title == "Fashion" %>
      <% else %>
          <%= paginate @products %>
      <% end %>
    <% end %>
  <% end %>
