  <%= link_to "Look by Newest",  products_newest_path, class: 'btn btn-xs btn-primary mobile-button hay' %>
    <h1 class="text-center font-best">All<br><p class="h6">The Newest and Best Products</p></h1>
    <div class = "outerfixed" >
      <div class = "interstatic">
        <%= link_to "Post New Product", new_product_path(@product), class: 'btn btn-primary btn-xs to-right' %>
         <%= link_to "New Category", new_category_path, class: 'btn btn-primary btn-xs fuller' %>
        <div class="leaderboard">
               <table class="table table-striped table-hover fixer">
                  <thead>
                    <tr>
                      <th colspan="2" class="names">Top Users</th>
                      <th class="names">Score</th>
                    </tr>
                  </thead>
                   <tbody>
                     <% @leaders.each do |leader| %>
                       <% user = User.friendly.find(leader[:member].to_i) %>
                       <% rank = leader[:rank].to_i %>
                    <tr>
                      <td class="td"><%= rank %></td>
                      <td>
                        <%= link_to [user] do %>
                          <%= image_tag(user.identity.smallimage)%><p class="names"><%= user.name %></p>
                        <% end %>
                      </td>
                      <td class="td"><%= leader[:score].to_i %></td>
                    </tr>
                   <% end %>
                </tbody>
              </table> 
        </div>
      </div>
    </div>


<div class="row">
  <input class="typeahead" type="text" placeholder="Search for users or categories" id="user-search" spellcheck="false" />


<!-- Typahead.js is used to display the auto-completion menu -->

<!-- Hogan.js is used to render the hits using Mustache.js templating -->
<script src="//cdn.jsdelivr.net/hogan.js/3.0.0/hogan.common.js"></script>
<!-- Algolia -->
<script src="//cdn.jsdelivr.net/algoliasearch/latest/algoliasearch.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    // Replace the following values by your ApplicationID and ApiKey.
    var client = new AlgoliaSearch("KFIEIP3I48", "7fffa97e4921141462636272ef5738ea"); // public credentials
    // replace YourTeamsIndexName & YourPlayersIndexName by the name of the indexes you want to query.
    var products = client.initIndex('Product');
    var users = client.initIndex('User');
    var categories = client.initIndex('Category');


    // Mustache templating by Hogan.js (http://mustache.github.io/)
    var templateUser = Hogan.compile('<div class="user fant">' +
      '<a href="/users/{{slug}}" class="fant"><div class="name"><p class="ayy"><img src={{image}} height="20" width="20" class="spack">{{{ _highlightResult.name.value }}}' +
    '</p></div></a>');
    var templateProduct = Hogan.compile('<div class="product fant">' +
      '<a href="categories/{{category_id}}/products/{{slug}}" class="fant""><div class="name samller"><span class="samller"><img alt="" src="https://upveil-production.s3.amazonaws.com/uploads/product/image/{{id}}/thumb_{{image}}" class="spack"></span>{{{ _highlightResult.title.value }}}' +
    '</div></a>');
     var templateCategory = Hogan.compile('<div class="categor fant">' +
       '<a href="/categories/{{slug}}" class="fant"><div class="name">{{{ _highlightResult.title.value }}}' +
    '</div></a>');

    // typeahead.js initialization
    $('#user-search').typeahead({ hint: false }, [
      {
        source: categories.ttAdapter({ hitsPerPage: 5 }),
        displayKey: 'name',
        templates: {
          header: '<div class="category">Categories</div>',
          suggestion: function(hit) { return templateCategory.render(hit); }
        }
      },
      {
        source: users.ttAdapter({ hitsPerPage: 5 }),
        displayKey: 'name',
        templates: {
          header: '<div class="category">Users</div>',
          suggestion: function(hit) { return templateUser.render(hit); }
        }
      },
         {
        source: products.ttAdapter({ hitsPerPage: 3 }),
        displayKey: 'name',
        templates: {
          header: '<div class="category">Products</div>',
          suggestion: function(hit) { return templateProduct.render(hit); }
        }
      }
    ]);
  });
</script>
  <div class="abc"> </div>
    <div class="page">
     <%= render @products %>
    </div>
  </div>
<%= paginate @products %>
</div>

